<%- include('../partials/adminHeader.ejs')%>
      <body class="admin-body">
     <%- include('../partials/adminNavbar.ejs') %>
     <%- include('../partials/adminSidebar.ejs') %>

        <section class="container pt-5">
          <div class="row ">
            <div class="col-12 table-responsive ">
              <table id="datatable" class="table display table-overflow  table-borderless table-hover">
                <thead>
                  <tr>
                    <th class="" scope="col">#</th>
                    <th class="" scope="col">Coupon Code</th>
                    <th class="" scope="col">Discount Type</th>
                    <th class="" scope="col">Discount Value</th>
                    <th class="" scope="col">Min Purchace Value</th>
                    <th class="" scope="col">Maximum Discount</th>
                    <th class="" scope="col">Validity End</th>
                    <th class="" scope="col">Usage Limit</th>
                    <th class="" scope="col">Total Usage</th>
                    <th class="" scope="col">is_Active</th>
                    <th class="" scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>

                  <% coupons.forEach((coupon,index)=>{ %>
                        <tr>
                          <th scope="row">
                            <%= index+1 %>
                          </th>
                          <td>
                            <strong>
                              <%= coupon.code %>
                          </strong>
                          </td>
                          
                          <td>
                            <%= coupon.discountType %>
                          </td>

                          <td>
                            <%= coupon.discountValue %>
                          </td>

                          <td>
                            <%= coupon.minimumOrderAmount %>
                          </td>

                          <td>
                            <%= coupon.maximumDiscountAmount %>
                          </td>

                          <td>
                            <%= coupon.validityEnd %>
                          </td>

                          <td>
                            <%= coupon.usageLimit %>
                          </td>

                          <td>
                            <%= coupon.totalUsageCount %>
                          </td>

                          <td>
                            <%= coupon.is_active %>
                          </td>
                    
                          <td>
                            <div>
                              <% if(coupon.is_active===true){ %>
                                <form action="/admin/deleteCoupon/<%= coupon._id %>" method="post">
                              <button type="submit" class="btn btn-outline-danger">Delete</button>
                            </form>
                            <% }else{ %>

                              <form action="/admin/recoverCoupon/<%= coupon._id %>" method="post">
                                <button type="submit" class="btn btn-outline-success">Recover</button>
                              </form>

                              <% } %>
                            </div>
                          </td>
                        </tr>
                        <%  }) %>
                         
                </tbody>
              </table>
            </div>
          </div>

          <a href="/admin/addCoupon"><button class="btn btn-outline-success">Add New Coupon</button></a>
        </section>

        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
        <script src="/scripts/adminScript.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
          crossorigin="anonymous"></script>
  </body>

</html>